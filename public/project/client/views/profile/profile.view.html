<h1 class="page-header">Profile</h1>

<div class="row placeholders">
    <div class="col-xs-10 col-sm-10 col-md-8 col-lg-6 placeholder text_left">
        <form class="form-horizontal">
            <div class="form-group">
                <label for="username" class="col-sm-2 control-label">Username</label>
                <div class="col-sm-10">
                <input type="text" class="form-control" ng-model="model.user.username" placeholder="Username">
                </div>
            </div>
            <div class="form-group">
                <label for="password" class="col-sm-2 control-label">Password</label>
                <div class="col-sm-10">
                <input type="password" class="form-control" ng-model="model.user.password" placeholder="Password">
                </div>
            </div>
            <div class="form-group">
                <label for="first_name" class="col-sm-2 control-label">First Name</label>
                <div class="col-sm-10">
                <input type="text" class="form-control" ng-model="model.user.firstName" placeholder="First Name">
                </div>
            </div>
            <div class="form-group">
                <label for="last_name" class="col-sm-2 control-label">Last Name</label>
                <div class="col-sm-10">
                <input type="text" class="form-control" ng-model="model.user.lastName" placeholder="Last Name">
                </div>
            </div>
            <div class="form-group">
                <label for="email" class="col-sm-2 control-label">Email</label>
                <div class="col-sm-10">
                <input type="email" class="form-control" ng-model="model.user.email" placeholder="Email">
                </div>
            </div>
            <div class="form-group">
                <label for="isModerator" class="col-sm-2 control-label">Moderator</label>
                <div class="col-sm-10">
                    <input type="checkbox" ng-model="model.user.isModerator" value="{{model.isModerator}}">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" ng-click="model.update()" class="btn btn-primary">Update</button>
                </div>
            </div>
        </form>
        
        <br>
        {{model.updateText}}
        <br>
        
        <button class="btn" data-toggle="collapse" data-target="#followingTable">Following</button>
        <button class="btn" data-toggle="collapse" data-target="#followersTable">Followers</button>
        <button class="btn" data-toggle="collapse" data-target="#posts">My Posts</button>
        
        <div class="table-response collapse" id="followingTable">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th data-field="username">
                            <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span> Username
                        </th>
                        <th data-field="actions">
                            <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span> Unfollow
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="user in currentUser.following">
                        <td><a href="#/publicProfile/{{user._id}}">{{user.username}}</a></td>
                        <td>
                            <button type="button" ng-click="model.unfollowUser($index)" class="btn btn-default">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="table-response collapse" id="followersTable">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th data-field="username">
                            <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span> Username
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="user in currentUser.followers">
                        <td><a href="#/publicProfile/{{user._id}}">{{user.username}}</a></td>
                    </tr>
                </tbody>
            </table>
        </div>  

        <div class="table-response collapse" id="posts">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th data-field="title">
                            <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span> Title
                        </th>
                        <th data-field="actions">
                            <span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span> Delete
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="post in currentUser.posts">
                        <td><a href="#/post/{{post._id}}">{{post.title}}</a></td>
                        <td>
                            <button type="button" ng-click="model.deletePost($index)" class="btn btn-default">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                        </td>                        
                    </tr>
                </tbody>
            </table>
        </div>                                      
    </div>
</div>